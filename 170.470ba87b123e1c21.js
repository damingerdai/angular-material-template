"use strict";(self.webpackChunkangular_material_template=self.webpackChunkangular_material_template||[]).push([[170],{8170:(Q,P,n)=>{n.r(P),n.d(P,{AuthModule:()=>Y});var p=n(6895),c=n(8996),a=n(4006),e=n(4650),f=n(1481),g=n(1645),h=n(263),m=n(1576),w=n(4859),l=n(3546),v=n(3162),u=n(9549),Z=n(4144),_=n(455);function T(t,i){1&t&&(e.TgZ(0,"mat-error",13),e._uU(1," Please enter a valid email address "),e.qZA())}function C(t,i){1&t&&(e.TgZ(0,"mat-error",14),e._uU(1," Email is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function b(t,i){1&t&&(e.TgZ(0,"mat-error",15),e._uU(1," Password is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function q(t,i){1&t&&e._UZ(0,"mat-progress-bar",16)}let R=(()=>{class t{constructor(o,r,s,d){this.router=o,this.titleService=r,this.notificationService=s,this.authenticationService=d}ngOnInit(){this.titleService.setTitle("angular-material-template - Login"),this.authenticationService.logout(),this.createForm()}createForm(){const o=localStorage.getItem("savedUserEmail");this.loginForm=new a.nJ({email:new a.p4(o,[a.kI.required,a.kI.email]),password:new a.p4("",a.kI.required),rememberMe:new a.p4(null!==o)})}login(){const o=this.loginForm.get("email")?.value,r=this.loginForm.get("password")?.value,s=this.loginForm.get("rememberMe")?.value;this.loading=!0,this.authenticationService.login(o.toLowerCase(),r).subscribe(d=>{s?localStorage.setItem("savedUserEmail",o):localStorage.removeItem("savedUserEmail"),this.router.navigate(["/"])},d=>{this.notificationService.openSnackBar(d.error),this.loading=!1})}resetPassword(){this.router.navigate(["/auth/password-reset-request"])}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(c.F0),e.Y36(f.Dx),e.Y36(g.g),e.Y36(h.$))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:24,vars:6,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"container","login-container"],["fxFlex","30%","fxFlex.sm","50%","fxFlex.xs","90%",3,"formGroup"],[1,"full-width"],["id","emailInput","matInput","","placeholder","Email","formControlName","email","autocomplete","email","type","email"],["id","invalidEmailError",4,"ngIf"],["id","requiredEmailError",4,"ngIf"],["id","passwordInput","matInput","","placeholder","Password","formControlName","password","type","password","autocomplete","current-password"],["id","requiredPasswordError",4,"ngIf"],["formControlName","rememberMe"],[1,"login-actions"],["mat-raised-button","","id","login","color","primary",3,"disabled","click"],["mat-button","","id","resetPassword","type","button",3,"click"],["mode","indeterminate",4,"ngIf"],["id","invalidEmailError"],["id","requiredEmailError"],["id","requiredPasswordError"],["mode","indeterminate"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-title"),e._uU(4,"angular-material-template"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6,"Log in to your account"),e.qZA(),e.TgZ(7,"mat-card-content")(8,"mat-form-field",2),e._UZ(9,"input",3),e.YNc(10,T,2,0,"mat-error",4),e.YNc(11,C,4,0,"mat-error",5),e.qZA(),e.TgZ(12,"mat-form-field",2),e._UZ(13,"input",6),e.YNc(14,b,4,0,"mat-error",7),e.qZA(),e.TgZ(15,"div",2)(16,"mat-slide-toggle",8),e._uU(17,"Remember my email address"),e.qZA()()(),e.TgZ(18,"mat-card-actions",9)(19,"button",10),e.NdJ("click",function(){return r.login()}),e._uU(20,"Login"),e.qZA(),e.TgZ(21,"button",11),e.NdJ("click",function(){return r.resetPassword()}),e._uU(22,"Reset Password"),e.qZA()()(),e.YNc(23,q,1,0,"mat-progress-bar",12),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("formGroup",r.loginForm),e.xp6(9),e.Q6J("ngIf",r.loginForm.controls.email.hasError("email")),e.xp6(1),e.Q6J("ngIf",r.loginForm.controls.email.hasError("required")),e.xp6(3),e.Q6J("ngIf",r.loginForm.controls.email.hasError("required")),e.xp6(5),e.Q6J("disabled",r.loginForm.invalid||r.loading),e.xp6(4),e.Q6J("ngIf",r.loading))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,m.xw,m.Wh,m.yH,w.lW,l.a8,l.dn,l.n5,l.$j,l.hq,v.pW,u.TO,u.KE,Z.Nt,_.Rr]}),t})();function y(t,i){1&t&&(e.TgZ(0,"mat-error",10),e._uU(1," Please enter a valid email address "),e.qZA())}function I(t,i){1&t&&(e.TgZ(0,"mat-error",11),e._uU(1," Email is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function A(t,i){1&t&&e._UZ(0,"mat-progress-bar",12)}let J=(()=>{class t{constructor(o,r,s,d){this.authService=o,this.notificationService=r,this.titleService=s,this.router=d}ngOnInit(){this.titleService.setTitle("angular-material-template - Password Reset Request"),this.form=new a.nJ({email:new a.p4("",[a.kI.required,a.kI.email])}),this.form.get("email")?.valueChanges.subscribe(o=>{this.email=o.toLowerCase()})}resetPassword(){this.loading=!0,this.authService.passwordResetRequest(this.email).subscribe(o=>{this.router.navigate(["/auth/login"]),this.notificationService.openSnackBar("Password verification mail has been sent to your email address.")},o=>{this.loading=!1,this.notificationService.openSnackBar(o.error)})}cancel(){this.router.navigate(["/"])}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(h.$),e.Y36(g.g),e.Y36(f.Dx),e.Y36(c.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-password-reset-request"]],decls:18,vars:5,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"container","login-container"],["fxFlex","30%","fxFlex.sm","50%","fxFlex.xs","90%",3,"formGroup"],[1,"full-width"],["id","emailInput","matInput","","placeholder","Email","formControlName","email","autocomplete","email","type","email"],["id","invalidEmailError",4,"ngIf"],["id","requiredEmailError",4,"ngIf"],[1,"login-actions"],["id","submit","mat-raised-button","","color","primary",3,"disabled","click"],["id","cancel","mat-button","",3,"click"],["mode","indeterminate",4,"ngIf"],["id","invalidEmailError"],["id","requiredEmailError"],["mode","indeterminate"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-title"),e._uU(4,"angular-material-template"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6,"Reset your password"),e.qZA(),e.TgZ(7,"mat-card-content")(8,"mat-form-field",2),e._UZ(9,"input",3),e.YNc(10,y,2,0,"mat-error",4),e.YNc(11,I,4,0,"mat-error",5),e.qZA()(),e.TgZ(12,"mat-card-actions",6)(13,"button",7),e.NdJ("click",function(){return r.resetPassword()}),e._uU(14,"Reset Password"),e.qZA(),e.TgZ(15,"button",8),e.NdJ("click",function(){return r.cancel()}),e._uU(16,"Cancel"),e.qZA()()(),e.YNc(17,A,1,0,"mat-progress-bar",9),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(9),e.Q6J("ngIf",r.form.controls.email.hasError("email")),e.xp6(1),e.Q6J("ngIf",r.form.controls.email.hasError("required")),e.xp6(2),e.Q6J("disabled",r.form.invalid||r.loading),e.xp6(4),e.Q6J("ngIf",r.loading))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,m.xw,m.Wh,m.yH,w.lW,l.a8,l.dn,l.n5,l.$j,l.hq,v.pW,u.TO,u.KE,Z.Nt]}),t})();var N=n(7392);function x(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a new password "),e.qZA())}function U(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a your current password "),e.qZA())}function E(t,i){1&t&&e._UZ(0,"mat-progress-bar",13)}const S=[{path:"login",component:R},{path:"password-reset-request",component:J},{path:"password-reset",component:(()=>{class t{constructor(o,r,s,d,L){this.activeRoute=o,this.router=r,this.authService=s,this.notificationService=d,this.titleService=L,this.titleService.setTitle("angular-material-template - Password Reset"),this.hideNewPassword=!0,this.hideNewPasswordConfirm=!0}ngOnInit(){this.activeRoute.queryParamMap.subscribe(o=>{this.token=o.get("token")+"",this.email=o.get("email")+"",(!this.token||!this.email)&&this.router.navigate(["/"])}),this.form=new a.nJ({newPassword:new a.p4("",a.kI.required),newPasswordConfirm:new a.p4("",a.kI.required)})}resetPassword(){const o=this.form.get("newPassword")?.value,r=this.form.get("newPasswordConfirm")?.value;o===r?(this.loading=!0,this.authService.passwordReset(this.email,this.token,o,r).subscribe(()=>{this.notificationService.openSnackBar("Your password has been changed."),this.router.navigate(["/auth/login"])},s=>{this.notificationService.openSnackBar(s.error),this.loading=!1})):this.notificationService.openSnackBar("Passwords do not match")}cancel(){this.router.navigate(["/"])}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(c.gz),e.Y36(c.F0),e.Y36(h.$),e.Y36(g.g),e.Y36(f.Dx))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-password-reset"]],decls:26,vars:10,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"container","login-container"],["fxFlex","30%","fxFlex.sm","50%","fxFlex.xs","90%",3,"formGroup"],[1,"full-width"],["id","emailInput","matInput","","readonly","","disabled","",3,"value"],["id","passwordInput","matInput","","placeholder","New Password","formControlName","newPassword","autocomplete","new-password",3,"type"],["id","togglePasswordVisibility","matSuffix","",3,"click"],[4,"ngIf"],["id","passwordConfirmInput","matInput","","placeholder","New Password Confirmation","formControlName","newPasswordConfirm","autocomplete","new-password",3,"type"],["id","togglePasswordConfirmVisibility","matSuffix","",3,"click"],[1,"login-actions"],["id","submit","mat-raised-button","","color","primary",3,"disabled","click"],["id","cancel","mat-button","",3,"click"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-card")(3,"mat-card-title"),e._uU(4,"angular-material-template"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6,"Reset your password"),e.qZA(),e.TgZ(7,"mat-card-content")(8,"mat-form-field",2),e._UZ(9,"input",3),e.qZA(),e.TgZ(10,"mat-form-field",2),e._UZ(11,"input",4),e.TgZ(12,"mat-icon",5),e.NdJ("click",function(){return r.hideNewPassword=!r.hideNewPassword}),e._uU(13),e.qZA(),e.YNc(14,x,2,0,"mat-error",6),e.qZA(),e.TgZ(15,"mat-form-field",2),e._UZ(16,"input",7),e.TgZ(17,"mat-icon",8),e.NdJ("click",function(){return r.hideNewPasswordConfirm=!r.hideNewPasswordConfirm}),e._uU(18),e.qZA(),e.YNc(19,U,2,0,"mat-error",6),e.qZA()(),e.TgZ(20,"mat-card-actions",9)(21,"button",10),e.NdJ("click",function(){return r.resetPassword()}),e._uU(22,"OK"),e.qZA(),e.TgZ(23,"button",11),e.NdJ("click",function(){return r.cancel()}),e._uU(24,"Back to Login"),e.qZA()()(),e.YNc(25,E,1,0,"mat-progress-bar",12),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(8),e.Q6J("value",r.email),e.xp6(2),e.Q6J("type",r.hideNewPassword?"password":"text"),e.xp6(2),e.hij(" ",r.hideNewPassword?"visibility":"visibility_off"," "),e.xp6(1),e.Q6J("ngIf",r.form.controls.newPassword.hasError("required")),e.xp6(2),e.Q6J("type",r.hideNewPasswordConfirm?"password":"text"),e.xp6(2),e.hij(" ",r.hideNewPasswordConfirm?"visibility":"visibility_off"," "),e.xp6(1),e.Q6J("ngIf",r.form.controls.newPasswordConfirm.hasError("required")),e.xp6(2),e.Q6J("disabled",r.form.invalid||r.loading),e.xp6(4),e.Q6J("ngIf",r.loading))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,m.xw,m.Wh,m.yH,N.Hw,w.lW,l.a8,l.dn,l.n5,l.$j,l.hq,v.pW,u.TO,u.KE,u.R9,Z.Nt]}),t})()}];let F=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(S),c.Bz]}),t})();var k=n(3927);let Y=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,k.m,F]}),t})()}}]);